<!--
 @component
 A form control that accepts a single line of text.
-->
<script>
import HelpText from './HelpText.svelte';
import Label from './Label.svelte';

// TODO: @jgibson – Add input types
/** @type {string} */
export let type = 'text';

/** @type {string}	*/
export let label;

/** @type {boolean}	*/
export let labelHidden = false;

/** @type {string | null}  */
export let placeholder = null;

/** @type {string}  */
export let name = '';

/**	@type {string | number} */
export let value;

/**	@type {number | null} */
export let min;

/**	@type {number | null} */
export let max = null;

/** @type {string} */
export let pattern = String.raw`^.+$`;

/** @type {boolean} */
export let required = false;

/**	@type {string | null} */
export let helpText = null;
</script>

<div>
	<Label forName={name} {labelHidden} {required}>{label}</Label>

	<div class="control">
		<!-- NOTE: With two way binding, svelte needs to understand the input type -->
		{#if type === 'email'}
			<input type="email" {placeholder} {name} {required} class="m-input" {pattern} bind:value />
		{:else if type === 'tel'}
			<input type="tel" {placeholder} {name} {required} class="m-input" {pattern} bind:value />
		{:else if type === 'number'}
			<input
				type="number"
				{placeholder}
				{name}
				{required}
				{min}
				{max}
				class="m-input"
				{pattern}
				bind:value
			/>
		{:else}
			<input type="text" {placeholder} {name} {required} class="m-input" {pattern} bind:value />
		{/if}
	</div>
	{#if helpText}<HelpText>{helpText}</HelpText>{/if}
</div>
